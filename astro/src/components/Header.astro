---
import { Image } from 'astro:assets';
import logoImage from '../assets/images/logo.png';

const currentPath = Astro.url.pathname;
---

<header class="sticky top-0 z-50 bg-white/95 backdrop-blur shadow-sm border-b border-slate-100">
  <div class="max-w-6xl mx-auto flex items-center justify-between px-4 py-3">
    <a href="/v2/" class="text-lg md:text-xl font-semibold text-slate-900 flex items-center gap-2">
      <Image 
        src={logoImage} 
        alt="Jamie Robertson Joiners and Building Contractor Logo" 
        width={320}
        quality={100}
        format="png"
        class="h-10 w-auto"
        loading="eager"
      />
      <span>Jamie Robertson <span class="text-[var(--accent-wood)]">Joiners<span class="hidden md:inline"> &amp;
            Building Contractor</span></span></span>
    </a>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center gap-6 text-sm font-medium" aria-label="Main navigation">
      <a href="/v2/services/" class="hover:text-[var(--accent-wood)]">Services</a>
      <a href="/v2/portfolio/" class="hover:text-[var(--accent-wood)]">Portfolio</a>
      <a href="/v2/about/" class="hover:text-[var(--accent-wood)]">About</a>
      <a href="/v2/contact/" class="hover:text-[var(--accent-wood)]">Contact</a>
    </nav>

    <div class="flex items-center gap-4">
      <a href="/v2/contact/"
        class="hidden md:inline-flex items-center rounded-full bg-[var(--accent-wood)] px-5 py-2 text-sm font-semibold text-white shadow-lg transition hover:bg-orange-700">
        Get in Touch
      </a>
      <!-- Mobile Menu Button -->
      <button id="mobile-menu-btn" class="md:hidden p-2 text-slate-600 hover:text-[var(--accent-wood)]"
        aria-label="Toggle menu" aria-expanded="false" aria-controls="mobile-menu">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu Dropdown -->
  <div id="mobile-menu" class="hidden md:hidden border-t border-slate-100 bg-white px-4 py-4 shadow-lg">
    <nav class="flex flex-col space-y-4 text-sm font-medium" aria-label="Mobile navigation">
      <a href="/v2/services/" class="block hover:text-[var(--accent-wood)]">Services</a>
      <a href="/v2/portfolio/" class="block hover:text-[var(--accent-wood)]">Portfolio</a>
      <a href="/v2/about/" class="block hover:text-[var(--accent-wood)]">About</a>
      <a href="/v2/contact/" class="block hover:text-[var(--accent-wood)]">Contact</a>
      <a href="/v2/contact/"
        class="block w-full text-center rounded-full bg-[var(--accent-wood)] px-5 py-2 text-white shadow-md">Get in
        Touch</a>
    </nav>
  </div>
</header>

<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const links = menu?.querySelectorAll('a');

  btn?.addEventListener('click', () => {
    const isHidden = menu?.classList.toggle('hidden');
    btn.setAttribute('aria-expanded', String(!isHidden));
  });

  // Close menu when a link is clicked
  links?.forEach(link => {
    link.addEventListener('click', () => {
      menu?.classList.add('hidden');
      btn?.setAttribute('aria-expanded', 'false');
    });
  });
</script>
